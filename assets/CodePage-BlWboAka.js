import{s as m,A as d,_ as f,j as _,a as i,o as l,b as e,k as P,v as b,m as I,P as c,l as $,c as h,e as A,t as p,F as k,g as x,h as C,f as S,d as w}from"./index-D9mzvvx9.js";class y{constructor(t){this.body=t.body,this.imgUrl=t.imgUrl,this.creatorId=t.creatorId,this.likeIds=t.likeIds,this.id=t.id,this.creator=t.creator.name,this.picture=t.creator.picture,this.createdAt=t.createdAt,this.likes=t.likes}}class U{async makePost(t){const a=await m.post("api/posts",t),r=new y(a.data);d.posts.push(r)}}const B=new U,V={__name:"PostCreate",setup(n){const t=_({body:"",imgUrl:""});async function a(){try{await B.makePost(t.value)}catch(r){c.error(r)}}return(r,s)=>(l(),i("form",{onSubmit:s[2]||(s[2]=I(o=>a(),["prevent"]))},[e("div",null,[s[3]||(s[3]=e("label",{for:"postBody",class:"form-label"},"Post Content",-1)),P(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.body=o),type:"text",class:"form-control",id:"postBody",maxlength:"300",required:""},null,512),[[b,t.value.body]])]),e("div",null,[s[4]||(s[4]=e("label",{for:"postImg",class:"form-label"},"Post Image",-1)),P(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.imgUrl=o),type:"url",class:"form-control",id:"postImg",maxlength:"400",required:""},null,512),[[b,t.value.imgUrl]])]),s[5]||(s[5]=e("button",{type:"submit",class:"btn btn-green"},"Post!",-1))],32))}},D=f(V,[["__scopeId","data-v-695d84cc"]]);class F{async likePost(t){await m.post(`api/posts/${t}/like`),await this.getAllPosts()}async deletePost(t){await m.delete(`api/posts/${t}`);const a=d.posts,r=a.findIndex(s=>s.id==t);a.splice(r,1)}async getAllPosts(){const t=await m.get("api/posts");$.log(t.data);const a=t.data.posts.map(r=>new y(r));d.posts=a}}const v=new F,N={class:"card txt-grn"},q={class:"card-header fs-5 align-items-end mb-0"},M=["src"],j={class:"card-body fs-3 mt-0"},L=["src"],T={class:"text-decoration-underline"},E={class:"text-end"},z={__name:"PostFeed",props:{post:{type:y,required:!0}},setup(n){const t=h(()=>d.account);async function a(s){try{if(!await c.confirm("yah sure?"))return;await v.deletePost(s)}catch(o){c.error(o)}}async function r(s){try{await v.likePost(s)}catch(o){c.error(o)}}return(s,o)=>{var g;return l(),i("div",N,[e("div",q,[e("img",{src:n.post.picture,alt:"Profile Picture",class:"prof-img d-flex justify-content-between"},null,8,M),A(" "+p(n.post.creator),1)]),e("div",null,p(new Date(n.post.createdAt).toLocaleString()),1),e("div",j,[e("div",null,p(n.post.body),1),e("img",{src:n.post.imgUrl,alt:""},null,8,L),o[2]||(o[2]=e("hr",null,null,-1)),e("div",{onClick:o[0]||(o[0]=u=>r(n.post.id)),type:"button"},"👍"),e("div",T,[(l(!0),i(k,null,x(n.post.likes,u=>(l(),i("div",{key:u.id,class:"fs-6"},[e("span",null,p(u.name),1)]))),128))]),e("div",E,[n.post.creatorId==((g=t.value)==null?void 0:g.id)?(l(),i("button",{key:0,onClick:o[1]||(o[1]=u=>a(n.post.id)),class:"btn btn-green",type:"button"},"Delete Post")):C("",!0)])])])}}},G=f(z,[["__scopeId","data-v-43f0ae44"]]),H={class:"container"},J={class:"row"},K={class:"col-md-10"},O={class:"row"},Q={__name:"CodePage",setup(n){const t=h(()=>d.posts);S(()=>{a()});async function a(){try{await v.getAllPosts()}catch(r){c.error(r)}}return(r,s)=>(l(),i("section",H,[e("div",J,[s[0]||(s[0]=e("div",{class:"col-md-2"}," account component search bar here ",-1)),e("div",K,[w(D),e("div",O,[(l(!0),i(k,null,x(t.value,o=>(l(),i("div",{key:o.id,class:"col-12"},[w(G,{post:o},null,8,["post"])]))),128))])])])]))}},W=f(Q,[["__scopeId","data-v-eb79d741"]]);export{W as default};
